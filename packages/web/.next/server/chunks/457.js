"use strict";exports.id=457,exports.ids=[457],exports.modules={6347:(e,t,r)=>{r.d(t,{nQ:()=>g,lF:()=>L,BV:()=>j});var n=r(1857),a=r(7884);let o="https://api.open-meteo.com/v1",i={ecmwf:`${o}/ecmwf`,gfs:`${o}/gfs`,icon:`${o}/dwd-icon`,jma:`${o}/jma`,gem:`${o}/gem`,meteofrance:`${o}/meteofrance`,ukmo:`${o}/ukmo`},s=["temperature_2m","apparent_temperature","relative_humidity_2m","surface_pressure","wind_speed_10m","wind_direction_10m","wind_gusts_10m","precipitation","precipitation_probability","cloud_cover","visibility","uv_index","weather_code"],u=["temperature_2m_max","temperature_2m_min","apparent_temperature_max","apparent_temperature_min","precipitation_sum","precipitation_probability_max","precipitation_hours","wind_speed_10m_max","wind_gusts_10m_max","wind_direction_10m_dominant","sunrise","sunset","daylight_duration","uv_index_max","weather_code"],c={forecastDays:7,timezone:"auto",timeout:3e4,retries:2};class l{constructor(e){this.defaultOptions={...c,...e}}async fetchModelForecast(e,t,r){let n;let o={...this.defaultOptions,...r},c=t.resolved.coordinates,l=function(e,t,r){let n=new URL(i[e]);return n.searchParams.set("latitude",String(t.latitude)),n.searchParams.set("longitude",String(t.longitude)),n.searchParams.set("hourly",s.join(",")),n.searchParams.set("daily",u.join(",")),n.searchParams.set("timezone",r.timezone),n.searchParams.set("forecast_days",String(r.forecastDays)),n}(e,c,o);for(let t=0;t<=o.retries;t++)try{let t=await this.fetchWithTimeout(l.toString(),o.timeout,e);return this.parseResponse(t,e,c)}catch(e){if(n=e instanceof Error?e:Error(String(e)),e instanceof a.M&&"API_TIMEOUT"!==e.code&&"API_UNAVAILABLE"!==e.code&&void 0!==e.statusCode&&e.statusCode<500)throw e;t<o.retries&&await function(e){return new Promise(t=>setTimeout(t,e))}(function(e,t=1e3){return t*Math.pow(2,e)+100*Math.random()}(t))}throw a.M.unavailable(e,n)}async fetchMultipleModels(e,t,r){let n=new Map,o=e.map(async e=>{try{let a=await this.fetchModelForecast(e,t,r);n.set(e,a)}catch(t){t instanceof a.M?n.set(e,t):n.set(e,a.M.unavailable(e,t instanceof Error?t:void 0))}});return await Promise.all(o),n}async fetchWithTimeout(e,t,r){let n=new AbortController,o=setTimeout(()=>n.abort(),t);try{let t=await fetch(e,{signal:n.signal,headers:{Accept:"application/json"}});if(clearTimeout(o),!t.ok)throw a.M.fromResponse(t.status,t.statusText,e,r);let i=await t.json();if(i.error)throw a.M.invalidResponse(e,i.reason??"Unknown API error",r);return i}catch(n){if(clearTimeout(o),n instanceof a.M)throw n;if(n instanceof Error&&"AbortError"===n.name)throw a.M.timeout(e,t,r);throw a.M.unavailable(r,n instanceof Error?n:void 0)}}parseResponse(e,t,r){let a=e.hourly?function(e){let t=[],r=e.time??[];for(let a=0;a<r.length;a++){let o=new Date(r[a]),i={temperature:(0,n.f7)(e.temperature_2m?.[a]??0),feelsLike:(0,n.f7)(e.apparent_temperature?.[a]??e.temperature_2m?.[a]??0),humidity:(0,n._4)(e.relative_humidity_2m?.[a]??0),pressure:(0,n.WI)(e.surface_pressure?.[a]??1013),windSpeed:(0,n.l0)(e.wind_speed_10m?.[a]!=null?e.wind_speed_10m[a]/3.6:0),windDirection:(0,n.Kv)(e.wind_direction_10m?.[a]??0),windGust:e.wind_gusts_10m?.[a]!=null?(0,n.l0)(e.wind_gusts_10m[a]/3.6):void 0,precipitation:(0,n.AC)(e.precipitation?.[a]??0),precipitationProbability:e.precipitation_probability?.[a]??0,cloudCover:(0,n.pS)(e.cloud_cover?.[a]??0),visibility:(0,n.WD)(e.visibility?.[a]??1e4),uvIndex:(0,n.m4)(e.uv_index?.[a]??0),weatherCode:(0,n.$7)(e.weather_code?.[a]??0)};t.push({timestamp:o,metrics:i})}return t}(e.hourly):[],o=e.daily?function(e,t){let r=[],a=e.time??[];for(let o=0;o<a.length;o++){let i=new Date(a[o]),s=function(e,t){let r=new Date(t);r.setHours(0,0,0,0);let n=new Date(t);return n.setHours(23,59,59,999),e.filter(e=>e.timestamp>=r&&e.timestamp<=n)}(t,i),u={min:(0,n.f7)(e.temperature_2m_min?.[o]??0),max:(0,n.f7)(e.temperature_2m_max?.[o]??0)},c={total:(0,n.AC)(e.precipitation_sum?.[o]??0),probability:e.precipitation_probability_max?.[o]??0,hours:e.precipitation_hours?.[o]??0},l={avgSpeed:(0,n.l0)(e.wind_speed_10m_max?.[o]!=null?e.wind_speed_10m_max[o]/3.6/2:0),maxSpeed:(0,n.l0)(e.wind_speed_10m_max?.[o]!=null?e.wind_speed_10m_max[o]/3.6:0),dominantDirection:(0,n.Kv)(e.wind_direction_10m_dominant?.[o]??0)},d={sunrise:new Date(e.sunrise?.[o]?e.sunrise[o]:i.setHours(6,0,0,0)),sunset:new Date(e.sunset?.[o]?e.sunset[o]:i.setHours(18,0,0,0)),daylightHours:(e.daylight_duration?.[o]??43200)/3600},m=s.map(e=>e.metrics.humidity),f=s.map(e=>e.metrics.pressure),g=s.map(e=>e.metrics.cloudCover);r.push({date:i,temperature:u,humidity:{min:(0,n._4)(m.length>0?Math.min(...m):0),max:(0,n._4)(m.length>0?Math.max(...m):100)},pressure:{min:(0,n.WI)(f.length>0?Math.min(...f):1013),max:(0,n.WI)(f.length>0?Math.max(...f):1013)},precipitation:c,wind:l,cloudCover:{avg:(0,n.pS)(g.length>0?g.reduce((e,t)=>e+t,0)/g.length:0),max:(0,n.pS)(g.length>0?Math.max(...g):0)},uvIndex:{max:(0,n.m4)(e.uv_index_max?.[o]??0)},sun:d,weatherCode:(0,n.$7)(e.weather_code?.[o]??0),hourly:s})}return r}(e.daily,a):[],i=new Date,s=a.length>0?a[0].timestamp:i,u=a.length>0?a[a.length-1].timestamp:i;return{model:t,coordinates:r,generatedAt:i,validFrom:s,validTo:u,hourly:a,daily:o}}}async function d(e,t,r){return new l(r).fetchModelForecast(e,t,r)}var m=r(8467);async function f(e,t,r){let n=Date.now();try{let a=await d(e,t,r),o=Date.now()-n;return{model:e,forecast:a,durationMs:o}}catch(r){let t=Date.now()-n;return{model:e,error:r instanceof Error?r:Error(String(r)),durationMs:t}}}async function g(e,t,r){let n;let a=Date.now(),o=new Date,i=t??Object.keys(m.a4),{requestDelayMs:s=0,...u}=r??{};n=s>0?i.map(async(t,r)=>{var n;return r>0&&await (n=s*r,new Promise(e=>setTimeout(e,n))),f(t,e,u)}):i.map(t=>f(t,e,u));let c=await Promise.allSettled(n),l=[],d=[];for(let e of c)if("fulfilled"===e.status){let{model:t,forecast:r,error:n,durationMs:a}=e.value;r?l.push(r):n&&d.push({model:t,error:n,durationMs:a})}else console.error("Unexpected rejection in Promise.allSettled:",e.reason instanceof Error?e.reason:Error(String(e.reason)));let g=Date.now()-a,p=i.length,h=p>0?l.length/p:0;return{forecasts:l,failures:d,fetchedAt:o,totalDurationMs:g,successRate:h}}var p=r(3489),h=r(9676),_=r(7814);let E=_.Km(["metric","imperial"]).default("metric"),I=_.Km(["json","table","minimal"]).default("table"),w=_.Ry({forecast:_.Z_().url().default("https://api.open-meteo.com/v1/forecast"),geocoding:_.Z_().url().default("https://geocoding-api.open-meteo.com/v1/search")}),v=_.Ry({enabled:_.O7().default(!0),ttlSeconds:_.Rx().int().positive().default(300),maxEntries:_.Rx().int().positive().default(100),directory:_.Z_().optional()}),R=_.Ry({defaults:_.IX(_.Km(["ecmwf","gfs","icon","meteofrance","ukmo","jma","gem"])).min(1).default(["ecmwf","gfs","icon"]),timeout:_.Rx().int().positive().default(3e4),retries:_.Rx().int().min(0).max(5).default(2)}),A=_.Ry({units:E,outputFormat:I,showConfidence:_.O7().default(!0),showModelDetails:_.O7().default(!1),colorOutput:_.O7().default(!0)}),y=_.Ry({api:w.default({}),cache:v.default({}),models:R.default({}),display:A.default({})}),O=y.parse({});var C=r(612),N=r(9411),b=r(3977),$=r(7561),P=r(8632);let S="WEATHER_ORACLE_";function T(e,t){let r={...e};for(let e of Object.keys(t)){let n=t[e],a=r[e];null==n||"object"!=typeof n||Array.isArray(n)||"object"!=typeof a||Array.isArray(a)||null===a?void 0!==n&&(r[e]=n):r[e]=T(a,n)}return r}async function D(e){try{await (0,b.access)(e,$.constants.R_OK);let t=await (0,b.readFile)(e,"utf-8");return JSON.parse(t)}catch(t){if("ENOENT"===t.code)return{};if(t instanceof SyntaxError)throw P.x.parseError(e,t);throw t}}async function M(e={}){let{configPath:t,overrides:r={},skipFile:n=!1,skipEnv:a=!1}=e,o={...O};if(!n){let e=t??(0,N.join)((0,N.join)((0,C.homedir)(),".weather-oracle"),"config.json");o=T(o,await D(e))}a||(o=T(o,function(){let e={},t=process.env[`${S}API_FORECAST_URL`],r=process.env[`${S}API_GEOCODING_URL`];(void 0!==t||void 0!==r)&&(e.api={...void 0!==t&&{forecast:t},...void 0!==r&&{geocoding:r}});let n=process.env[`${S}CACHE_ENABLED`],a=process.env[`${S}CACHE_TTL_SECONDS`],o=process.env[`${S}CACHE_MAX_ENTRIES`],i=process.env[`${S}CACHE_DIRECTORY`];(void 0!==n||void 0!==a||void 0!==o||void 0!==i)&&(e.cache={...void 0!==n&&{enabled:"true"===n},...void 0!==a&&{ttlSeconds:parseInt(a,10)},...void 0!==o&&{maxEntries:parseInt(o,10)},...void 0!==i&&{directory:i}});let s=process.env[`${S}DEFAULT_MODELS`],u=process.env[`${S}MODEL_TIMEOUT`],c=process.env[`${S}MODEL_RETRIES`];(void 0!==s||void 0!==u||void 0!==c)&&(e.models={...void 0!==s&&{defaults:s.split(",")},...void 0!==u&&{timeout:parseInt(u,10)},...void 0!==c&&{retries:parseInt(c,10)}});let l=process.env[`${S}UNITS`],d=process.env[`${S}OUTPUT_FORMAT`],m=process.env[`${S}SHOW_CONFIDENCE`],f=process.env[`${S}SHOW_MODEL_DETAILS`],g=process.env[`${S}COLOR_OUTPUT`];return(void 0!==l||void 0!==d||void 0!==m||void 0!==f||void 0!==g)&&(e.display={...void 0!==l&&{units:l},...void 0!==d&&{outputFormat:d},...void 0!==m&&{showConfidence:"true"===m},...void 0!==f&&{showModelDetails:"true"===f},...void 0!==g&&{colorOutput:"true"===g}}),e}())),o=T(o,r);let i=y.safeParse(o);if(!i.success){let e=i.error.errors[0];throw P.x.invalid(e?.path.join(".")??"unknown",e?.message??"Validation failed")}return i.data}let x={count:5,language:"en",timeout:1e4};function k(e,t,r){let n=new URL(t);return n.searchParams.set("name",e),n.searchParams.set("count",String(r.count)),n.searchParams.set("language",r.language),n.searchParams.set("format","json"),n}function U(e){let t={latitude:(0,p.pq)(e.latitude),longitude:(0,p.MS)(e.longitude)},r=e.admin1??e.admin2;return{name:e.name,coordinates:t,country:e.country??"Unknown",countryCode:e.country_code??"XX",region:r,timezone:(0,p.T6)(e.timezone??"UTC"),elevation:void 0!==e.elevation?(0,p.XC)(e.elevation):void 0,population:e.population}}function F(e){let t=e.trim();if(0===t.length)throw h.R.invalidInput(e,"Location query cannot be empty.");if(t.length<2)throw h.R.invalidInput(e,"Location query must be at least 2 characters.");if(t.length>200)throw h.R.invalidInput(e,"Location query is too long (max 200 characters).")}async function L(e,t){F(e);let r=t?.endpoint;r||(r=(await M({skipFile:!0,skipEnv:!1})).api.geocoding);let n={count:t?.count??x.count,language:t?.language??x.language,timeout:t?.timeout??x.timeout},a=k(e.trim(),r,n),o=new AbortController,i=setTimeout(()=>o.abort(),n.timeout);try{let t=await fetch(a.toString(),{signal:o.signal,headers:{Accept:"application/json"}});if(clearTimeout(i),!t.ok)throw h.R.serviceError(e,Error(`HTTP ${t.status}: ${t.statusText}`));let r=await t.json();if(!r.results||0===r.results.length)throw h.R.notFound(e);return U(r.results[0])}catch(t){if(clearTimeout(i),t instanceof h.R)throw t;if(t instanceof Error&&"AbortError"===t.name)throw h.R.serviceError(e,Error(`Request timed out after ${n.timeout}ms`));throw h.R.serviceError(e,t instanceof Error?t:Error(String(t)))}}async function j(e,t){F(e);let r=t?.endpoint;r||(r=(await M({skipFile:!0,skipEnv:!1})).api.geocoding);let n={count:t?.count??x.count,language:t?.language??x.language,timeout:t?.timeout??x.timeout},a=k(e.trim(),r,n),o=new AbortController,i=setTimeout(()=>o.abort(),n.timeout);try{let t=await fetch(a.toString(),{signal:o.signal,headers:{Accept:"application/json"}});if(clearTimeout(i),!t.ok)throw h.R.serviceError(e,Error(`HTTP ${t.status}: ${t.statusText}`));let r=await t.json();if(!r.results||0===r.results.length)return[];return r.results.map(U)}catch(t){if(clearTimeout(i),t instanceof h.R)throw t;if(t instanceof Error&&"AbortError"===t.name)throw h.R.serviceError(e,Error(`Request timed out after ${n.timeout}ms`));throw h.R.serviceError(e,t instanceof Error?t:Error(String(t)))}}},7884:(e,t,r)=>{r.d(t,{M:()=>a});var n=r(3355);class a extends n.F{constructor(e,t,r,n){super(e,t,r,n?.debugInfo),this.name="ApiError",this.statusCode=n?.statusCode,this.endpoint=n?.endpoint,this.model=n?.model}static rateLimited(e,t){let r=e?` Please try again in ${e} seconds.`:" Please try again later.";return new a(n.j.API_RATE_LIMIT,`Rate limit exceeded${t?` for ${t}`:""}`,`Too many requests.${r}`,{statusCode:429,model:t,debugInfo:{retryAfterSeconds:e}})}static timeout(e,t,r){return new a(n.j.API_TIMEOUT,`Request timed out after ${t}ms to ${e}`,"The request took too long. Please try again.",{endpoint:e,model:r,debugInfo:{timeoutMs:t,endpoint:e}})}static unavailable(e,t){let r=e?` (${e})`:"";return new a(n.j.API_UNAVAILABLE,`Weather service unavailable${r}: ${t?.message??"Unknown error"}`,"Weather service is temporarily unavailable. Please try again later.",{model:e,debugInfo:{originalError:t?.message,originalStack:t?.stack}})}static invalidResponse(e,t,r){return new a(n.j.API_INVALID_RESPONSE,`Invalid response from ${e}: ${t}`,"Received invalid data from weather service. Please try again.",{endpoint:e,model:r,debugInfo:{reason:t,endpoint:e}})}static authFailed(e,t){return new a(n.j.API_AUTH_FAILED,`Authentication failed for ${e}`,"API authentication failed. Please check your configuration.",{statusCode:401,endpoint:e,model:t,debugInfo:{endpoint:e}})}static fromResponse(e,t,r,o){let i,s;switch(e){case 401:case 403:i=n.j.API_AUTH_FAILED,s="API authentication failed. Please check your configuration.";break;case 429:i=n.j.API_RATE_LIMIT,s="Too many requests. Please try again later.";break;case 500:case 502:case 503:case 504:i=n.j.API_UNAVAILABLE,s="Weather service is temporarily unavailable. Please try again later.";break;default:i=n.j.API_INVALID_RESPONSE,s="Failed to fetch weather data. Please try again."}return new a(i,`HTTP ${e} ${t} from ${r}`,s,{statusCode:e,endpoint:r,model:o,debugInfo:{statusCode:e,statusText:t,endpoint:r}})}}},3355:(e,t,r)=>{var n;r.d(t,{F:()=>a,j:()=>n}),function(e){e.GEOCODING_NOT_FOUND="GEOCODING_NOT_FOUND",e.GEOCODING_AMBIGUOUS="GEOCODING_AMBIGUOUS",e.GEOCODING_INVALID_INPUT="GEOCODING_INVALID_INPUT",e.GEOCODING_SERVICE_ERROR="GEOCODING_SERVICE_ERROR",e.API_RATE_LIMIT="API_RATE_LIMIT",e.API_TIMEOUT="API_TIMEOUT",e.API_UNAVAILABLE="API_UNAVAILABLE",e.API_INVALID_RESPONSE="API_INVALID_RESPONSE",e.API_AUTH_FAILED="API_AUTH_FAILED",e.CONFIG_INVALID="CONFIG_INVALID",e.CONFIG_MISSING="CONFIG_MISSING",e.CONFIG_PARSE_ERROR="CONFIG_PARSE_ERROR",e.CACHE_READ_ERROR="CACHE_READ_ERROR",e.CACHE_WRITE_ERROR="CACHE_WRITE_ERROR",e.CACHE_EXPIRED="CACHE_EXPIRED",e.CACHE_CORRUPTED="CACHE_CORRUPTED",e.UNKNOWN="UNKNOWN",e.INTERNAL="INTERNAL"}(n||(n={}));class a extends Error{constructor(e,t,r,n){super(t),this.name="WeatherOracleError",this.code=e,this.userMessage=r,this.debugInfo=n?{...n,timestamp:new Date}:void 0,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}static isWeatherOracleError(e){return e instanceof a}static fromUnknown(e){return e instanceof a?e:e instanceof Error?new a("UNKNOWN",e.message,"An unexpected error occurred. Please try again.",{originalError:e.name,originalStack:e.stack}):new a("UNKNOWN",String(e),"An unexpected error occurred. Please try again.",{originalValue:e})}toLogFormat(){let e=[`[${this.code}] ${this.message}`,`User message: ${this.userMessage}`];return this.debugInfo&&e.push(`Debug info: ${JSON.stringify(this.debugInfo,null,2)}`),this.stack&&e.push(`Stack trace:
${this.stack}`),e.join("\n")}}},5758:(e,t,r)=>{r.d(t,{j:()=>a});var n=r(3355);class a extends n.F{constructor(e,t,r,n){super(e,t,r,n?.debugInfo),this.name="CacheError",this.cacheKey=n?.cacheKey,this.cachePath=n?.cachePath}static readError(e,t){return new a(n.j.CACHE_READ_ERROR,`Failed to read cache for key "${e}": ${t?.message??"Unknown error"}`,"Failed to read cached data. Fetching fresh data.",{cacheKey:e,debugInfo:{cacheKey:e,originalError:t?.message,originalStack:t?.stack}})}static writeError(e,t){return new a(n.j.CACHE_WRITE_ERROR,`Failed to write cache for key "${e}": ${t?.message??"Unknown error"}`,"Failed to save data to cache. Data will need to be fetched again next time.",{cacheKey:e,debugInfo:{cacheKey:e,originalError:t?.message,originalStack:t?.stack}})}static expired(e,t){return new a(n.j.CACHE_EXPIRED,`Cache expired for key "${e}" at ${t.toISOString()}`,"Cached data has expired. Fetching fresh data.",{cacheKey:e,debugInfo:{cacheKey:e,expiredAt:t.toISOString()}})}static corrupted(e,t,r){return new a(n.j.CACHE_CORRUPTED,`Corrupted cache for key "${e}": ${t}`,"Cache data is corrupted. Clearing cache and fetching fresh data.",{cacheKey:e,cachePath:r,debugInfo:{cacheKey:e,reason:t,cachePath:r}})}static initError(e,t){return new a(n.j.CACHE_WRITE_ERROR,`Failed to initialize cache at "${e}": ${t?.message??"Unknown error"}`,"Failed to initialize cache. Running without caching.",{cachePath:e,debugInfo:{cachePath:e,originalError:t?.message,originalStack:t?.stack}})}}},8632:(e,t,r)=>{r.d(t,{x:()=>a});var n=r(3355);class a extends n.F{constructor(e,t,r,n){super(e,t,r,n?.debugInfo),this.name="ConfigError",this.configKey=n?.configKey,this.filePath=n?.filePath}static invalid(e,t,r){return new a(n.j.CONFIG_INVALID,`Invalid configuration for "${e}": ${t}`,`Invalid configuration: ${t}. Please check your settings.`,{configKey:e,filePath:r,debugInfo:{configKey:e,reason:t,filePath:r}})}static missing(e,t){let r=t?` (${t})`:"";return new a(n.j.CONFIG_MISSING,`Missing required configuration: "${e}"${r}`,`Missing configuration: "${e}". Please configure this setting.`,{configKey:e,debugInfo:{configKey:e,description:t}})}static parseError(e,t){return new a(n.j.CONFIG_PARSE_ERROR,`Failed to parse configuration file "${e}": ${t?.message??"Unknown error"}`,"Could not read configuration file. Please check the file format.",{filePath:e,debugInfo:{filePath:e,originalError:t?.message,originalStack:t?.stack}})}static missingEnvVar(e,t){let r=t?` for ${t}`:"";return new a(n.j.CONFIG_MISSING,`Missing environment variable: ${e}${r}`,`Missing environment variable: ${e}. Please set this in your environment.`,{configKey:e,debugInfo:{envVar:e,purpose:t}})}}},9676:(e,t,r)=>{r.d(t,{R:()=>a});var n=r(3355);class a extends n.F{constructor(e,t,r,n,a){super(e,t,r,a?.debugInfo),this.name="GeocodingError",this.query=n,this.suggestions=a?.suggestions}static notFound(e,t){let r=t?.length?` Did you mean: ${t.map(e=>o(e)).join(" or ")}?`:"";return new a(n.j.GEOCODING_NOT_FOUND,`Location not found: "${e}"`,`Location not found: "${e}"${r}`,e,{suggestions:t,debugInfo:{searchedQuery:e}})}static ambiguous(e,t){let r=t.map(e=>o(e)).join(", ");return new a(n.j.GEOCODING_AMBIGUOUS,`Ambiguous location: "${e}" matches multiple places`,`Multiple locations found for "${e}". Please be more specific: ${r}`,e,{suggestions:t,debugInfo:{matchCount:t.length}})}static invalidInput(e,t){return new a(n.j.GEOCODING_INVALID_INPUT,`Invalid location query: ${t}`,`Invalid location: "${e}". ${t}`,e,{debugInfo:{reason:t}})}static serviceError(e,t){return new a(n.j.GEOCODING_SERVICE_ERROR,`Geocoding service error: ${t?.message??"Unknown error"}`,"Unable to look up location. Please try again later.",e,{debugInfo:{originalError:t?.message,originalStack:t?.stack}})}}function o(e){let t=[e.name];return e.region&&t.push(e.region),e.country&&t.push(e.country),`"${t.join(", ")}"`}},6250:(e,t,r)=>{r.d(t,{ei:()=>o,k0:()=>i}),r(3355);var n=r(9676),a=r(7884);function o(e){return e instanceof n.R}function i(e){return e instanceof a.M}r(8632),r(5758)},3489:(e,t,r)=>{function n(e){if(e<-90||e>90)throw RangeError(`Latitude must be between -90 and 90, got ${e}`);return e}function a(e){if(e<-180||e>180)throw RangeError(`Longitude must be between -180 and 180, got ${e}`);return e}function o(e){return e}function i(e){return e}function s(e,t){return{latitude:n(e),longitude:a(t)}}r.d(t,{DC:()=>s,MS:()=>a,T6:()=>i,XC:()=>o,pq:()=>n})},8467:(e,t,r)=>{r.d(t,{a4:()=>n,mS:()=>a});let n={ecmwf:{displayName:"ECMWF IFS",provider:"European Centre for Medium-Range Weather Forecasts",resolution:"9km",updateFrequency:"6 hours"},gfs:{displayName:"GFS",provider:"NOAA/NCEP",resolution:"13km",updateFrequency:"6 hours"},icon:{displayName:"ICON",provider:"Deutscher Wetterdienst",resolution:"7km",updateFrequency:"6 hours"},meteofrance:{displayName:"ARPEGE",provider:"M\xe9t\xe9o-France",resolution:"10km",updateFrequency:"6 hours"},ukmo:{displayName:"UK Met Office",provider:"UK Meteorological Office",resolution:"10km",updateFrequency:"6 hours"},jma:{displayName:"JMA GSM",provider:"Japan Meteorological Agency",resolution:"20km",updateFrequency:"6 hours"},gem:{displayName:"GEM",provider:"Environment Canada",resolution:"15km",updateFrequency:"12 hours"}};function a(e){if(e<0||e>1)throw RangeError(`Confidence score must be between 0 and 1, got ${e}`);return{level:e>=.7?"high":e>=.4?"medium":"low",score:e}}},1857:(e,t,r)=>{function n(e){return e}function a(e){if(e<0)throw RangeError(`Precipitation cannot be negative, got ${e}`);return e}function o(e){if(e<0)throw RangeError(`Wind speed cannot be negative, got ${e}`);return e}function i(e){return(e%360+360)%360}function s(e){if(e<0||e>100)throw RangeError(`Humidity must be between 0 and 100, got ${e}`);return e}function u(e){if(e<0)throw RangeError(`Pressure cannot be negative, got ${e}`);return e}function c(e){if(e<0||e>100)throw RangeError(`Cloud cover must be between 0 and 100, got ${e}`);return e}function l(e){if(e<0)throw RangeError(`UV index cannot be negative, got ${e}`);return e}function d(e){if(e<0)throw RangeError(`Visibility cannot be negative, got ${e}`);return e}function m(e){return e}r.d(t,{$7:()=>m,AC:()=>a,Kv:()=>i,WD:()=>d,WI:()=>u,_4:()=>s,f7:()=>n,l0:()=>o,m4:()=>l,pS:()=>c})},7539:(e,t,r)=>{r.d(t,{No:()=>u,R0:()=>i,Xj:()=>a,o3:()=>c});var n=r(5787);function a(e,t={}){let r={success:!0,data:e,meta:{...t,fetchedAt:t.fetchedAt instanceof Date?t.fetchedAt.toISOString():t.fetchedAt??new Date().toISOString()}};return n.NextResponse.json(r,{status:200,headers:{"Cache-Control":"public, max-age=300, s-maxage=600"}})}function o(e,t,r=500,a){let o={success:!1,error:{code:e,message:t,...a&&{details:a}}};return n.NextResponse.json(o,{status:r})}let i={badRequest:(e,t)=>o("BAD_REQUEST",e,400,t),notFound:e=>o("NOT_FOUND",e,404),internalError:(e="An internal error occurred")=>o("INTERNAL_ERROR",e,500),serviceUnavailable:(e="Service temporarily unavailable")=>o("SERVICE_UNAVAILABLE",e,503),rateLimited:(e="Rate limit exceeded")=>o("RATE_LIMIT_EXCEEDED",e,429),missingParameter:e=>o("MISSING_PARAMETER",`Missing required parameter: ${e}`,400,{parameter:e})},s={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"};function u(){return new n.NextResponse(null,{status:204,headers:s})}function c(e){for(let[t,r]of Object.entries(s))e.headers.set(t,r);return e}}};